<style>

/* =========================================================
   PALETA CORPORATIVA + DARK MODE
   ========================================================= */
:root{
    /* LIGHT MODE */
    --bg:#f3f6fb;
    --card:#ffffff;
    --panel:#f7f9fc;

    --brand:#0b5bd7;
    --brand-dark:#073f8a;

    --accent-success:#1DB954;
    --accent-danger:#ff3b30;

    --muted:#65707a;
    --text:#0b1115;
    --shadow:0 6px 18px rgba(13,30,45,0.06);
    --radius:14px;

    /* BOTTOM MENU */
    --menu-bg:var(--brand);
    --menu-text:#ffffff;
}

/* DARK MODE */
body.dark{
    --bg:#0d0f11;
    --card:#14171a;
    --panel:#1a1d21;

    --text:#e6e6e6;
    --muted:#a9a9a9;

    --shadow:0 6px 18px rgba(0,0,0,0.6);

    --menu-bg:#0a2f6d;
}

/* BASE */
body{
    margin:0;
    background:var(--bg);
    font-family:Inter, Roboto, Arial;
    color:var(--text);
    padding-bottom:150px;
    transition:background .3s, color .3s;
}

/* HEADER */
header{
    background:linear-gradient(135deg,var(--brand),var(--brand-dark));
    padding:18px;
    text-align:center;
    color:#fff;
    font-weight:700;
    font-size:20px;
    box-shadow:var(--shadow);
}

/* CONTAINER */
.container{
    max-width:900px;
    margin:20px auto;
    padding:0 16px;
}

/* TOP CARDS */
.top-row{
    display:flex;
    gap:16px;
    flex-wrap:wrap;
}

.cardTop{
    flex:1 1 30%;
    background:var(--card);
    border-radius:var(--radius);
    padding:18px;
    text-align:center;
    box-shadow:var(--shadow);
    transition:background .3s, color .3s, transform .2s;
}

.cardTop:hover{
    transform:translateY(-3px);
}

.cardTop h3{
    margin:0;
    font-size:14px;
    color:var(--muted);
}

.cardTop .value{
    font-size:32px;
    font-weight:800;
    margin-top:8px;
    color:var(--text);
}

/* FILTER BUTTONS */
.filters{
    display:flex;
    gap:10px;
    margin-top:20px;
}

.filters button{
    flex:1;
    padding:12px;
    border:none;
    border-radius:12px;
    background:var(--panel);
    box-shadow:var(--shadow);
    color:var(--text);
    font-weight:700;
    cursor:pointer;
    transition:background .25s;
}

.filters button.active{
    background:linear-gradient(135deg,var(--brand),var(--brand-dark));
    color:#fff;
}

/* SECTION CARD */
.card{
    margin-top:20px;
    background:var(--card);
    padding:18px;
    border-radius:var(--radius);
    box-shadow:var(--shadow);
    transition:background .3s, color .3s;
}

.card h2{
    margin:0 0 12px 0;
    font-size:18px;
    color:var(--text);
    font-weight:800;
}

/* SUMMARY LINES */
.line{
    display:flex;
    justify-content:space-between;
    padding:12px 0;
    border-bottom:1px solid rgba(0,0,0,0.05);
    color:var(--text);
    font-size:15px;
}

body.dark .line{
    border-color:#222;
}

/* CHART */
.chartRow{
    display:flex;
    justify-content:center;
    align-items:flex-end;
    gap:20px;
    padding-top:20px;
}

.bar{
    width:28%;
    background:var(--panel);
    border-radius:14px 14px 0 0;
    padding-top:6px;
    height:140px;
    display:flex;
    flex-direction:column;
    justify-content:flex-end;
}

.bar .inner{
    width:70%;
    margin:0 auto;
    background:var(--brand);
    border-radius:12px 12px 0 0;
    display:flex;
    align-items:flex-end;
    justify-content:center;
    padding-bottom:6px;
    font-weight:800;
    color:#fff;
    transition:height .4s ease;
}

.barLabel{
    text-align:center;
    margin-top:6px;
    color:var(--muted);
}

/* BOTTOM MENU ‚Äî CORPORATE STYLE */
.bottom-menu{
    position:fixed;
    bottom:18px;
    left:50%;
    transform:translateX(-50%);
    width:92%;
    max-width:980px;
    background:var(--menu-bg);
    padding:10px 0;
    border-radius:18px;
    display:flex;
    justify-content:space-around;
    box-shadow:0 12px 30px rgba(11,30,45,0.5);
    z-index:1000;
    border:1px solid rgba(255,255,255,0.2);
}

.bottom-menu .menu-item{
    text-align:center;
    color:var(--menu-text);
    text-decoration:none!important;
    font-size:13px;
    display:flex;
    flex-direction:column;
    align-items:center;
    font-weight:800;
}

.bottom-menu .menu-item .icon{
    font-size:22px;
    margin-bottom:4px;
}

.bottom-menu .active{
    opacity:0.9;
    scale:1.06;
}

/* RESPONSIVE */
@media(max-width:780px){
    .cardTop{ flex:1 1 100%; }
}

</style>
<body>

<!-- =========================================================
     HEADER COM BOT√ÉO DE MODO ESCURO
     ========================================================= -->
<header>
    Resumo
    <button id="toggleDark" class="darkToggle">üåô</button>
</header>

<div class="container">

    <!-- =========================================================
         TOP CARDS
         ========================================================= -->
    <div class="top-row">

        <div class="cardTop">
            <h3>Faturamento</h3>
            <div id="valFaturamento" class="value">R$ 0,00</div>
        </div>

        <div class="cardTop">
            <h3>Despesas</h3>
            <div id="valDespesas" class="value">R$ 0,00</div>
        </div>

        <div class="cardTop">
            <h3>Lucro L√≠quido</h3>
            <div id="valLucro" class="value">R$ 0,00</div>
        </div>

    </div>


    <!-- =========================================================
         FILTROS
         ========================================================= -->
    <div class="filters">
        <button id="fDia" class="active" onclick="setFiltro('dia')">Hoje</button>
        <button id="fSemana" onclick="setFiltro('semana')">Semana</button>
        <button id="fMes" onclick="setFiltro('mes')">M√™s</button>
    </div>


    <!-- =========================================================
         RESUMO POR M√âTODO
         ========================================================= -->
    <div class="card">
        <h2>Resumo por M√©todo</h2>

        <div class="line"><span>Dinheiro:</span> <strong id="mDinheiro">R$ 0,00</strong></div>
        <div class="line"><span>PIX:</span> <strong id="mPix">R$ 0,00</strong></div>
        <div class="line"><span>Cart√£o:</span> <strong id="mCartao">R$ 0,00</strong></div>
        <div class="line"><span>App (Uber/99):</span> <strong id="mApp">R$ 0,00</strong></div>
        <div class="line"><span>Outras entradas:</span> <strong id="mOutras">R$ 0,00</strong></div>
    </div>


    <!-- =========================================================
         RESUMO POR CATEGORIA
         ========================================================= -->
    <div class="card">
        <h2>Resumo por Categoria</h2>

        <div class="line"><span>Uber:</span> <strong id="cUber">R$ 0,00</strong></div>
        <div class="line"><span>99:</span> <strong id="c99">R$ 0,00</strong></div>
        <div class="line"><span>InDriver:</span> <strong id="cInDriver">R$ 0,00</strong></div>
        <div class="line"><span>Particular:</span> <strong id="cParticular">R$ 0,00</strong></div>
        <div class="line"><span>Empresa:</span> <strong id="cEmpresa">R$ 0,00</strong></div>
    </div>


    <!-- =========================================================
         MINI CHART (FATURAMENTO / DESPESAS / LUCRO)
         ========================================================= -->
    <div class="card">
        <h2>Desempenho</h2>

        <div class="chartRow">

            <div class="bar">
                <div id="barFat" class="inner" style="height:10%;">0%</div>
                <div class="barLabel">Faturamento</div>
            </div>

            <div class="bar">
                <div id="barDesp" class="inner" style="height:10%;">0%</div>
                <div class="barLabel">Despesas</div>
            </div>

            <div class="bar">
                <div id="barLucro" class="inner" style="height:10%;">0%</div>
                <div class="barLabel">Lucro</div>
            </div>

        </div>
    </div>

</div>


<!-- =========================================================
     BOTTOM MENU CORPORATIVO
     ========================================================= -->
<nav class="bottom-menu">
    <a href="index.html" class="menu-item">
        <span class="icon">üè†</span>
        <span>Dashboard</span>
    </a>

    <a href="entradas.html" class="menu-item">
        <span class="icon">üíµ</span>
        <span>Entradas</span>
    </a>

    <a href="manutencao.html" class="menu-item">
        <span class="icon">üõ†Ô∏è</span>
        <span>Manuten√ß√£o</span>
    </a>

    <a href="resumo.html" class="menu-item active">
        <span class="icon">üìä</span>
        <span>Resumo</span>
    </a>

    <a href="perfil.html" class="menu-item">
        <span class="icon">üë§</span>
        <span>Perfil</span>
    </a>

    <a href="calculadora.html" class="menu-item">
        <span class="icon">üìü</span>
        <span>Calc</span>
    </a>
</nav>
<script>
/* =========================================================
   HELPERS B√ÅSICOS
   ========================================================= */
const $ = id => document.getElementById(id);
const brl = v => Number(v || 0).toLocaleString("pt-BR", {
    style: "currency",
    currency: "BRL"
});


/* =========================================================
   MODO ESCURO GLOBAL (SINCRONIZADO)
   ========================================================= */
function aplicarTema(){
    const tema = localStorage.getItem("tema") || "light";
    if(tema === "dark"){
        document.body.classList.add("dark");
        $("toggleDark").innerText = "‚òÄÔ∏è";
    } else {
        document.body.classList.remove("dark");
        $("toggleDark").innerText = "üåô";
    }
}

$("toggleDark").addEventListener("click", () => {
    const atual = localStorage.getItem("tema") || "light";
    const novo = atual === "light" ? "dark" : "light";
    localStorage.setItem("tema", novo);
    aplicarTema();
});

aplicarTema();


/* =========================================================
   FILTROS DE DATA (DIA / SEMANA / M√äS)
   ========================================================= */
let filtro = "dia";

function setFiltro(f){
    filtro = f;

    document.querySelectorAll(".filters button").forEach(b => {
        b.classList.remove("active");
    });

    $("f" + f.charAt(0).toUpperCase() + f.slice(1)).classList.add("active");

    atualizarResumo();
}

/* --- Fun√ß√µes de per√≠odo --- */
function isToday(date){
    const n = new Date();
    return date.getFullYear() === n.getFullYear()
        && date.getMonth() === n.getMonth()
        && date.getDate() === n.getDate();
}

function isSameWeek(date){
    const now = new Date();
    const first = now.getDate() - now.getDay() + 1;
    const start = new Date(now.setDate(first));
    const end = new Date(now.setDate(first + 6));
    return date >= start && date <= end;
}

function isSameMonth(date){
    const now = new Date();
    return date.getFullYear() === now.getFullYear()
        && date.getMonth() === now.getMonth();
}

function filtrarData(d){
    if(filtro === "dia") return isToday(d);
    if(filtro === "semana") return isSameWeek(d);
    return isSameMonth(d);
}


/* =========================================================
   RESUMO FINAL (C√ÅLCULOS)
   ========================================================= */
function atualizarResumo(){

    let registros = JSON.parse(localStorage.getItem("entradasSaidas") || "[]");

    let fat = 0, desp = 0;

    let mDin = 0, mPix = 0, mCar = 0, mApp = 0, mOut = 0;
    let cU = 0, c99 = 0, cInd = 0, cPar = 0, cEmp = 0;

    registros.forEach(r => {
        const d = new Date(r.criadoEm);
        if(!filtrarData(d)) return;

        const v = Number(r.valor || 0);

        if(r.tipo === "entrada"){

            fat += v;

            // M√©todo
            if(r.formaPag === "dinheiro") mDin += v;
            else if(r.formaPag === "pix") mPix += v;
            else if(r.formaPag === "cartao") mCar += v;
            else if(r.formaPag === "appMobile") mApp += v;
            else mOut += v;

            // Categoria
            if(r.appTipo === "uber") cU += v;
            if(r.appTipo === "99") c99 += v;
            if(r.appTipo === "indriver") cInd += v;

            if(r.categoria === "particular") cPar += v;
            if(r.categoria === "empresa") cEmp += v;

        } else {
            desp += v;

            // Reduzir m√©todo proporcionalmente
            if(r.formaPag === "dinheiro") mDin -= v;
            else if(r.formaPag === "pix") mPix -= v;
            else if(r.formaPag === "cartao") mCar -= v;
        }
    });

    const lucro = fat - desp;


    /* =========================================================
       EXIBI√á√ÉO DOS VALORES
       ========================================================= */
    $("valFaturamento").innerText = brl(fat);
    $("valDespesas").innerText = brl(desp);
    $("valLucro").innerText = brl(lucro);

    $("valLucro").style.color = lucro >= 0 ? "var(--accent-success)" : "var(--accent-danger)";

    $("mDinheiro").innerText = brl(mDin);
    $("mPix").innerText = brl(mPix);
    $("mCartao").innerText = brl(mCar);
    $("mApp").innerText = brl(mApp);
    $("mOutras").innerText = brl(mOut);

    $("cUber").innerText = brl(cU);
    $("c99").innerText = brl(c99);
    $("cInDriver").innerText = brl(cInd);
    $("cParticular").innerText = brl(cPar);
    $("cEmpresa").innerText = brl(cEmp);


    /* =========================================================
       GR√ÅFICO (FAT / DESP / LUCRO)
       ========================================================= */
    const max = Math.max(fat, desp, Math.abs(lucro), 10);

    // faturamento
    const pctFat = Math.round(fat / max * 100);
    $("barFat").style.height = pctFat + "%";
    $("barFat").innerText = pctFat + "%";

    // despesas
    const pctDesp = Math.round(desp / max * 100);
    $("barDesp").style.height = pctDesp + "%";
    $("barDesp").innerText = pctDesp + "%";

    // lucro
    const pctLucro = Math.round(Math.abs(lucro) / max * 100);
    $("barLucro").style.height = pctLucro + "%";
    $("barLucro").innerText = pctLucro + "%";

    $("barLucro").style.background =
        lucro >= 0 ? "var(--accent-success)" : "var(--accent-danger)";
}


/* =========================================================
   INICIALIZA√á√ÉO
   ========================================================= */
window.onload = atualizarResumo;
</script>
