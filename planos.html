<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Planos - Fluxo Driver</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;700;800&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#ffffff;
  --page-bg: #f3f5f8;
  --card:#fafbfc;
  --panel:#ffffff;
  --card-strong:#f0f2f5;
  --brand:#0b5bd7;
  --brand-dark:#073f8a;
  --accent:#22c55e;
  --text:#0b1115;
  --muted:#65707a;
  --shadow:0 10px 30px rgba(15,23,42,0.12);
  --radius:18px;
}

.dark{
  --bg:#020617;
  --page-bg:#0f172a;
  --card:#0f172a;
  --panel:#0f172a;
  --card-strong:#1e293b;
  --brand:#3b82f6;
  --brand-dark:#1d4ed8;
  --accent:#22c55e;
  --text:#e5e7eb;
  --muted:#9ca3af;
  --shadow:0 14px 45px rgba(0,0,0,0.55);
}

*{box-sizing:border-box;font-family:Inter,system-ui,Arial;}
body{
  margin:0;
  background:var(--page-bg);
  color:var(--text);
}
body.menu-open{overflow:hidden;}

.wrap{
  max-width:980px;
  margin:24px auto 40px auto;
  padding:0 16px 40px 16px;
}
h1{margin:0 0 4px;font-size:24px;font-weight:800;}
.subtitle{
  color:var(--muted);
  font-size:14px;
  margin-bottom:16px;
}

/* header */
header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:16px 16px 8px 16px;
  max-width:980px;
  margin:0 auto;
}
#toggleTheme{
  background:var(--card-strong);
  padding:8px 12px;
  border-radius:999px;
  border:1px solid rgba(15,23,42,0.12);
  font-weight:700;
  cursor:pointer;
  color:var(--text);
  display:flex;
  align-items:center;
  gap:6px;
  font-size:12px;
}
#toggleTheme span.icon{
  font-size:16px;
}

/* highlight bar */
.top-highlight{
  max-width:980px;
  margin:0 auto 12px auto;
  padding:0 16px;
}
.badge-pill{
  display:inline-flex;
  align-items:center;
  gap:6px;
  font-size:11px;
  padding:4px 10px;
  border-radius:999px;
  background:rgba(37,99,235,0.08);
  color:var(--brand-dark);
  border:1px solid rgba(37,99,235,0.3);
}

/* cards */
.cards{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
  gap:16px;
  margin-top:10px;
}
.card{
  background:var(--card);
  border-radius:var(--radius);
  padding:18px 18px 16px 18px;
  border:1px solid rgba(148,163,184,0.25);
  box-shadow:var(--shadow);
  position:relative;
  transition:.25s transform,.25s box-shadow,.25s border-color;
}
.card:hover{
  transform:translateY(-2px);
  box-shadow:0 16px 40px rgba(15,23,42,0.18);
  border-color:rgba(37,99,235,0.35);
}
.card.highlight{
  border-color:var(--brand);
  box-shadow:0 0 0 2px rgba(37,99,235,0.45),var(--shadow);
}
.badge{
  position:absolute;
  top:14px;right:14px;
  background:var(--panel);
  border-radius:999px;
  padding:4px 10px;
  font-size:11px;
  color:var(--text);
  border:1px solid rgba(148,163,184,0.4);
  display:flex;
  align-items:center;
  gap:4px;
}
.plan-name{font-size:18px;font-weight:800;margin-bottom:2px;}
.plan-desc{font-size:12px;color:var(--muted);margin-bottom:10px;}
.price{
  font-size:22px;
  font-weight:900;
  margin:6px 0 0 0;
}
.price span{
  font-size:13px;
  font-weight:500;
  color:var(--muted);
}
.price-vita{
  margin-top:4px;
  font-size:12px;
  font-weight:600;
  color:var(--accent);
}
.price-vita small{
  display:block;
  font-size:11px;
  font-weight:500;
  color:var(--muted);
  margin-top:2px;
}

/* feature list */
.features{
  list-style:none;
  padding:0;
  margin:12px 0 0 0;
}
.features li{
  font-size:12px;
  margin-bottom:6px;
  color:var(--muted);
  display:flex;
  gap:6px;
  align-items:flex-start;
}
.features li span.icon{
  font-size:14px;
  margin-top:1px;
}

/* buttons */
.btn{
  margin-top:12px;
  width:100%;
  padding:10px 14px;
  border-radius:10px;
  border:0;
  cursor:pointer;
  font-weight:700;
  font-size:13px;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:6px;
}
.btn-primary{
  background:linear-gradient(135deg,var(--brand),var(--brand-dark));
  color:#fff;
}
.btn-primary:hover{
  filter:brightness(1.05);
}
.btn-outline{
  background:transparent;
  color:var(--text);
  border:1px solid rgba(148,163,184,0.6);
}
.btn-outline:hover{
  border-color:rgba(37,99,235,0.7);
}

/* plano atual */
.current{
  margin-top:8px;
  font-size:11px;
  color:var(--brand);
  font-weight:600;
  text-align:center;
}

/* se√ß√£o mensagem */
.info-section{
  margin-top:18px;
  font-size:12px;
  color:var(--muted);
  line-height:1.5;
}
.info-section strong{color:var(--text);}

/* MENU LATERAL */
.sidebar{
  position:fixed;top:0;left:-260px;
  width:260px;height:100%;
  background:var(--panel);
  padding:20px;
  box-shadow:2px 0 18px rgba(15,23,42,.35);
  transition:.3s;
  z-index:9999;
  overflow-y:auto;
}
.sidebar.open{left:0;}

.menu-button{
  position:fixed;
  top:8px;
  left:15px;
  background:var(--brand);
  color:#fff;
  padding:8px 12px;
  border-radius:999px;
  cursor:pointer;
  z-index:9999;
  font-weight:700;
  font-size:13px;
  display:flex;
  align-items:center;
  gap:6px;
  box-shadow:0 8px 16px rgba(15,23,42,0.25);
}
.menu-button span.icon{font-size:16px;}

.menu-close{
  display:block;
  font-size:24px;
  cursor:pointer;
  margin-bottom:6px;
  text-align:right;
}
.menu-title{
  font-weight:700;
  font-size:35px;
  margin-bottom:10px;
}
.menu-item{
  padding:15px 0;
  font-size:20px;
  cursor:pointer;
  display:flex;
  align-items:center;
  gap:10px;
}
.menu-item-label{
  display:flex;
  align-items:center;
  gap:4px;
}
.menu-item span.icon-flag{
  width:18px;
}
.submenu{
  padding-left:18px;
  margin-bottom:4px;
}
.submenu-item{
  padding:4px 0;
  font-size:12px;
  cursor:pointer;
  display:flex;
  align-items:center;
  gap:6px;
}
.submenu-item span.icon-flag{
  width:18px;
}
</style>
</head>

<body>

<div class="menu-button" onclick="openMenu()">
  <span class="icon">‚ò∞</span>
  <span>Menu</span>
</div>

<header>

<div class="wrap">

  <div>
    <h1>Planos Fluxo Driver</h1>
    <div class="subtitle">Escolha o plano que acompanha o seu ritmo e cresce junto com suas corridas.</div>
  </div>
  <button id="toggleTheme">
    <span class="icon">üåô</span>
    <span>Escuro/Claro</span>
  </button>
</header>

  <!-- Bot√£o comparar planos -->
  <div style="display:flex;justify-content:flex-end;margin-bottom:20px;">
    <button class="btn btn-outline" style="max-width:1000px;" onclick="abrirComparacao()">
      üìä Comparar planos
    </button>
  </div>

  <div id="currentPlanInfo" class="subtitle" style="margin-top:0;"></div>

  <div class="cards">

    <!-- Free -->
    <div class="card" id="cardFree">
      <div class="badge"><span>üÜì</span><span>Plano gr√°tis</span></div>
      <div class="plan-name">Free</div>
      <div class="plan-desc">Ideal para testar o app registrando apenas as corridas.</div>

      <div class="price">R$ 0,00 <span>/ m√™s</span></div>

      <ul class="features">
        <li><span class="icon">‚úÖ</span><span>Entradas corridas liberadas</span></li>
        <li><span class="icon">üîí</span><span>Outras entradas, sa√≠das e relat√≥rios bloqueados</span></li>
        <li><span class="icon">üîí</span><span>Sem recibos e calculadora avan√ßada</span></li>
      </ul>

      <button class="btn btn-outline" onclick="ativarPlano('free')">
        Usar plano Free
      </button>
      <div id="flagFree" class="current" style="display:none;">Plano atual</div>
    </div>

    <!-- B√°sico -->
    <div class="card" id="cardBasico">
      <div class="badge"><span>üöÄ</span><span>Para iniciantes</span></div>
      <div class="plan-name">B√°sico</div>
      <div class="plan-desc">Controle di√°rio essencial para quem est√° come√ßando a organizar as finan√ßas.</div>

      <div class="price">R$ 14,90 <span>/ m√™s</span></div>
      <div class="price-vita">
        Vital√≠cio: R$ 149,00
        <small>Equivalente a ~10 meses de assinatura. Ap√≥s isso, √© como se o app ‚Äúse pagasse‚Äù.</small>
      </div>

      <ul class="features">
        <li><span class="icon">‚úÖ</span><span>Dashboard com vis√£o simples do dia</span></li>
        <li><span class="icon">‚úÖ</span><span>Entradas de corridas e sa√≠das liberadas</span></li>
        <li><span class="icon">üîí</span><span>‚ÄúOutras entradas‚Äù bloqueadas</span></li>
        <li><span class="icon">‚úÖ</span><span>Perfil para configura√ß√µes b√°sicas</span></li>
      </ul>

      <button class="btn btn-outline" onclick="ativarPlano('basico')">
        Ativar B√°sico
      </button>
      <div id="flagBasico" class="current" style="display:none;">Plano atual</div>
    </div>

    <!-- Premium -->
    <div class="card highlight" id="cardPremium">
      <div class="badge"><span>üåü</span><span>Mais escolhido</span></div>
      <div class="plan-name">Premium</div>
      <div class="plan-desc">Para motoristas que querem controle completo do fluxo di√°rio e ferramentas extras.</div>

      <div class="price">R$ 29,90 <span>/ m√™s</span></div>
      <div class="price-vita">
        Vital√≠cio: R$ 249,00
        <small>Equivalente a ~8 meses de assinatura, com acesso permanente √†s fun√ß√µes atuais.</small>
      </div>

      <ul class="features">
        <li><span class="icon">‚úÖ</span><span>Dashboard completo</span></li>
        <li><span class="icon">‚úÖ</span><span>Entradas (corridas, outras entradas e sa√≠das)</span></li>
        <li><span class="icon">üîë</span><span>Recibo Particular com envio via WhatsApp</span></li>
        <li><span class="icon">‚úÖ</span><span>Calculadora Simples e Premium para planejar o dia</span></li>
        <li><span class="icon">‚úÖ</span><span>Perfil com ajustes mais completos</span></li>
      </ul>

      <button class="btn btn-primary" onclick="ativarPlano('premium')">
        <span>Ativar Premium</span> <span>‚ú®</span>
      </button>
      <div id="flagPremium" class="current" style="display:none;">Plano atual</div>
    </div>

    <!-- Pro -->
    <div class="card" id="cardPro">
      <div class="badge"><span>üèÅ</span><span>Para frotas</span></div>
      <div class="plan-name">Pro</div>
      <div class="plan-desc">Tudo liberado para quem gerencia v√°rios ve√≠culos ou leva o fluxo ao m√°ximo.</div>

      <div class="price">R$ 39,90 <span>/ m√™s</span></div>
      <div class="price-vita">
        Vital√≠cio: R$ 399,00
        <small>Equivalente a ~10 meses. Ideal para uso por muito tempo ou frotas.</small>
      </div>

      <ul class="features">
        <li><span class="icon">‚úÖ</span><span>Dashboard completo e detalhado</span></li>
        <li><span class="icon">‚úÖ</span><span>Todas as entradas e sa√≠das liberadas</span></li>
        <li><span class="icon">‚úÖ</span><span>Recibos para empresas e particulares</span></li>
        <li><span class="icon">‚úÖ</span><span>Manuten√ß√£o e resumo geral completos</span></li>
        <li><span class="icon">‚úÖ</span><span>Calculadora com todos os recursos</span></li>
      </ul>

      <button class="btn btn-outline" onclick="ativarPlano('pro')">
        Ativar Pro
      </button>
      <div id="flagPro" class="current" style="display:none;">Plano atual</div>
    </div>

  </div>

  <div class="info-section">
    <p>
      <strong>Assinaturas:</strong> incluem todas as futuras atualiza√ß√µes dentro da categoria escolhida
      (B√°sico, Premium ou Pro), sem custo adicional durante o per√≠odo ativo.
    </p>
    <p>
      <strong>Vital√≠cio:</strong> garante acesso vital√≠cio √†s funcionalidades atuais do plano escolhido.
      Futuras atualiza√ß√µes poder√£o ser adquiridas separadamente, mesmo que com valor simb√≥lico.
    </p>
  </div>

</div>

<!-- MENU LATERAL COMPLETO -->
<div id="sidebar" class="sidebar">
  <span class="menu-close" onclick="closeMenu()">√ó</span>
  <div class="menu-title">Navega√ß√£o</div>
  <div class="menu-item" onclick="location.href='planos.html'">üíé Planos</div>
  <div class="menu-item" onclick="location.href='index.html'">üè† Dashboard</div>
  <div class="menu-item" onclick="location.href='entradas.html'">üíµ Entradas</div>
  <div class="menu-item" onclick="location.href='recibo_empresa.html'">üè≠ Empresa</div>
  <div class="menu-item" onclick="location.href='recibo_particular.html'">üöò Particular</div>
  <div class="menu-item" onclick="location.href='manutencao.html'">üõ† Manuten√ß√£o</div>
  <div class="menu-item" onclick="location.href='resumo.html'">üßÆ Resumo</div>
  <div class="menu-item" onclick="location.href='perfil.html'">üë§ Perfil</div>
  <div class="menu-item" onclick="location.href='calculadora.html'">üìü Calculadora</div>
</div>

<script>
/* ===== Tema ===== */
function applyTheme(t){
  if(t === 'dark'){
    document.documentElement.classList.add('dark');
    localStorage.setItem('theme','dark');
    document.getElementById('toggleTheme').querySelector('.icon').textContent = '‚òÄÔ∏è';
  }else{
    document.documentElement.classList.remove('dark');
    localStorage.setItem('theme','light');
    document.getElementById('toggleTheme').querySelector('.icon').textContent = 'üåô';
  }
}

// quando carregar
document.addEventListener('DOMContentLoaded', ()=>{

  const toggle = document.getElementById('toggleTheme');
  if(!toggle) return;

  const savedTheme = localStorage.getItem('theme') || 'light';
  applyTheme(savedTheme);

  toggle.addEventListener('click',()=>{
    const isDark = document.documentElement.classList.contains('dark');
    applyTheme(isDark ? 'light' : 'dark');
  });

});

/* ===== Plano ===== */
function setPlano(p){ localStorage.setItem("planoAtual",p); }
function getPlano(){ return localStorage.getItem("planoAtual") || "free"; }

// pegamos permiss√µes do planos.js
function getPermissao(feature){
  return permissoes[planoAtivo()][feature];
}

function icon(level){
  if(level==="full") return "‚úÖ";
  if(level==="partial") return "üîë";
  return "üîí";
}


/* MENU */
function openMenu(){
  document.getElementById('sidebar').classList.add('open');
  document.body.classList.add('menu-open');
}
function closeMenu(){
  document.getElementById('sidebar').classList.remove('open');
  document.body.classList.remove('menu-open');
}

function navegar(pagina,feature){
  const level = getPermissao(feature);

  if(level === "locked"){
    alert("Atualize o plano para desbloquear esta fun√ß√£o.");
    return;
  }
  window.location.href = pagina + ".html";
}

function renderMenu(){
  const plano = planoAtivo();
  for(const key in permissoes[plano]){
    const el = document.getElementById(`icon-${key.replaceAll("_","-")}`);
    if(el){
      el.innerText = icon(getPermissao(key));
    }
  }
}


/* UI plano atual */
function renderPlanoAtual(){
  const planoReal = getPlano();

  const nomesBonitos = {
    free:"Free",
    basico:"B√°sico",
    premium:"Premium",
    pro:"Pro"
  };

  const label = nomesBonitos[planoReal] || planoReal;

  const info = document.getElementById('currentPlanInfo');
  if(info){
    info.textContent = "Plano atual: " + label;
  }

  document.querySelectorAll('.current').forEach(el=>el.style.display='none');

  if(planoReal === 'free') document.getElementById('flagFree').style.display='block';
  if(planoReal === 'basico') document.getElementById('flagBasico').style.display='block';
  if(planoReal === 'premium') document.getElementById('flagPremium').style.display='block';
  if(planoReal === 'pro') document.getElementById('flagPro').style.display='block';
}


/* ===== Bot√£o ativar plano ===== */
function ativarPlano(p){

  // basico / premium ‚Üí trial 24h PRO
  if(p==="basico" || p==="premium"){
    setPlano(p);             // salva plano REAL
    iniciarTrial24h(p);      // libera pro 24h
    renderPlanoAtual();
    renderMenu();
    return;
  }

  // free / pro ‚Üí normal
  setPlano(p);
  renderPlanoAtual();
  renderMenu();
  alert("Plano atualizado para " + p.toUpperCase());
}
</script>


<!-- mant√©m -->
<script src="planos.js"></script>

<script>
  checarTrial();
  iniciarTrialSePrimeiraVez();
  renderPlanoAtual();
  renderMenu();
</script>

</body>
</html>
